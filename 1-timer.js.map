{"version":3,"file":"1-timer.js","sources":["../src/js/timer.js","../src/js/1-timer.js"],"sourcesContent":["class Timer {\n  #daysElement;\n  #hoursElement;\n  #minutesElement;\n  #secondsElement;\n  #intervalMs;\n  #onFinish;\n\n  #targetMs;\n  #intervalId;\n\n  constructor({\n    daysElement,\n    hoursElement,\n    minutesElement,\n    secondsElement,\n    interval = 1000,\n    onFinish = () => {},\n  }) {\n    this.#daysElement = daysElement;\n    this.#hoursElement = hoursElement;\n    this.#minutesElement = minutesElement;\n    this.#secondsElement = secondsElement;\n    this.#intervalMs = interval;\n    this.#onFinish = onFinish;\n  }\n\n  start(targetMs) {\n    if (targetMs <= Date.now()) {\n      throw new Error('Invalid target date');\n    }\n\n    this.#targetMs = targetMs;\n    this.#intervalId = setInterval(() => {\n      this.update();\n    }, this.#intervalMs);\n    this.update();\n  }\n\n  stop() {\n    clearInterval(this.#intervalId);\n  }\n\n  update() {\n    const timeLeft = new Date(Math.max(this.#targetMs - Date.now(), 0));\n\n    if (this.#daysElement !== null) {\n      const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));\n      this.#daysElement.textContent = getString(days);\n    }\n\n    if (this.#hoursElement !== null) {\n      this.#hoursElement.textContent = getString(timeLeft.getUTCHours());\n    }\n\n    if (this.#minutesElement !== null) {\n      this.#minutesElement.textContent = getString(timeLeft.getUTCMinutes());\n    }\n\n    if (this.#secondsElement !== null) {\n      this.#secondsElement.textContent = getString(timeLeft.getUTCSeconds());\n    }\n\n    if (timeLeft <= 0) {\n      this.stop();\n      this.#onFinish();\n    }\n\n    function getString(number) {\n      return number.toString().padStart(2, '0');\n    }\n  }\n}\n\nexport default Timer;\n","import flatpickr from 'flatpickr';\nimport { showError } from './izi-toast-api';\n\nconst fpOptions = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const isFutureDate = selectedDates[0] > Date.now();\n    startButton.disabled = !isFutureDate;\n\n    if (!isFutureDate) {\n      showError('Please choose a date in the future');\n    }\n  },\n};\n\nconst dateTimePicker = document.querySelector('#datetime-picker');\nconst fp = flatpickr(dateTimePicker, fpOptions);\nconst startButton = document.querySelector('button[data-start]');\nstartButton.disabled = true;\n\nstartButton.addEventListener('click', () => {\n  tryStartTimer();\n});\n\nimport Timer from './timer';\nconst timer = new Timer({\n  daysElement: document.querySelector('.timer span[data-days]'),\n  hoursElement: document.querySelector('.timer span[data-hours]'),\n  minutesElement: document.querySelector('.timer span[data-minutes]'),\n  secondsElement: document.querySelector('.timer span[data-seconds]'),\n  interval: 1000,\n  onFinish() {\n    dateTimePicker.disabled = false;\n  },\n});\n\nfunction tryStartTimer() {\n  try {\n    timer.start(fp.selectedDates[0].getTime());\n    dateTimePicker.disabled = true;\n    startButton.disabled = true;\n  } catch (error) {\n    startButton.disabled = true;\n    console.error(error.message);\n  }\n}\n"],"names":["Timer","daysElement","hoursElement","minutesElement","secondsElement","interval","onFinish","__privateAdd","_daysElement","_hoursElement","_minutesElement","_secondsElement","_intervalMs","_onFinish","_targetMs","_intervalId","__privateSet","targetMs","__privateGet","timeLeft","days","getString","number","fpOptions","selectedDates","isFutureDate","startButton","showError","dateTimePicker","fp","flatpickr","tryStartTimer","timer","error"],"mappings":"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"}